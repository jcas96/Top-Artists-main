(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();const c="5f56bd6a2551494ca8579167c145bedf",d=new URLSearchParams(window.location.search),s=d.get("code");if(!s)l(c);else{const t=await m(c,s),e=await f(t),o=await h(t),r=await g(t),a=await y(t),n=await w(t);T(e),S(o),_(r),A(a),E(n)}async function l(t){const e=p(128),o=await u(e);localStorage.setItem("verifier",e);const r=new URLSearchParams;r.append("client_id",t),r.append("response_type","code"),r.append("redirect_uri","https://top-charts-9caa721698e8.herokuapp.com/callback"),r.append("scope","user-read-private user-read-email user-top-read"),r.append("code_challenge_method","S256"),r.append("code_challenge",o),document.location=`https://accounts.spotify.com/authorize?${r.toString()}`}function p(t){let e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<t;r++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}async function u(t){const e=new TextEncoder().encode(t),o=await window.crypto.subtle.digest("SHA-256",e);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(o)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function m(t,e){const o=localStorage.getItem("verifier"),r=new URLSearchParams;r.append("client_id",t),r.append("grant_type","authorization_code"),r.append("code",e),r.append("redirect_uri","https://top-charts-9caa721698e8.herokuapp.com/callback"),r.append("code_verifier",o);const a=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r}),{access_token:n}=await a.json();return n}async function f(t){return await(await fetch("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${t}`}})).json()}async function h(t){return await(await fetch("https://api.spotify.com/v1/me/top/tracks?time_range=medium_term&limit=10&offset=0",{method:"GET",headers:{Authorization:`Bearer ${t}`}})).json()}async function g(t){return await(await fetch("https://api.spotify.com/v1/me/top/tracks?time_range=short_term&limit=10&offset=0",{method:"GET",headers:{Authorization:`Bearer ${t}`}})).json()}async function y(t){return await(await fetch("https://api.spotify.com/v1/me/top/artists?time_range=medium_term&limit=10&offset=0",{method:"GET",headers:{Authorization:`Bearer ${t}`}})).json()}async function w(t){return await(await fetch("https://api.spotify.com/v1/me/top/artists?time_range=short_term&limit=10&offset=0",{method:"GET",headers:{Authorization:`Bearer ${t}`}})).json()}function T(t){if(document.getElementById("displayName").innerText=t.display_name,t.images[0]){const e=new Image(200,200);e.src=t.images[0].url,document.getElementById("avatar").appendChild(e)}document.getElementById("uri").innerText=t.uri,document.getElementById("uri").setAttribute("href",t.external_urls.spotify)}function S(t){for(let e=0;e<10;e++){let o="num"+(e+1);document.getElementById(o).innerText=t.items[e].name}}function _(t){for(let e=0;e<10;e++){let o="sNum"+(e+1);document.getElementById(o).innerText=t.items[e].name}}function A(t){for(let e=0;e<10;e++){let o="aNum"+(e+1);document.getElementById(o).innerText=t.items[e].name}}function E(t){for(let e=0;e<10;e++){let o="aNumS"+(e+1);document.getElementById(o).innerText=t.items[e].name}}
